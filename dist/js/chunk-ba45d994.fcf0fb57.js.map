{"version":3,"sources":["webpack:///./src/components/content/musiclist/MusicList.vue?8338","webpack:///src/components/content/musiclist/MusicList.vue","webpack:///./src/components/content/musiclist/MusicList.vue?3780","webpack:///./src/components/content/musiclist/MusicList.vue","webpack:///./src/network/rank.js","webpack:///./src/views/ranking/childrenComp/UniqueList.vue?07b2","webpack:///src/views/ranking/childrenComp/UniqueList.vue","webpack:///./src/views/ranking/childrenComp/UniqueList.vue?9a7c","webpack:///./src/views/ranking/childrenComp/UniqueList.vue","webpack:///./src/components/content/musiclist/MusicList.vue?6848","webpack:///./src/views/ranking/childrenComp/UniqueList.vue?1a71"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","back","_v","_s","title","ref","style","directives","name","rawName","value","songs","length","expression","random","attrs","scroll","rank","selectItem","staticRenderFns","props","type","default","bgImage","dafault","mixins","components","Scroll","SongList","Loading","data","computed","mounted","methods","watch","component","getRank","request","url","params","showDetail","getTopList","id","created"],"mappings":"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","file":"js/chunk-ba45d994.fcf0fb57.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.baStyle)},[_c('div',{staticClass:\"play-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length>0),expression:\"songs.length>0\"}],ref:\"play\",staticClass:\"play\",on:{\"click\":_vm.random}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])])]),_c('div',{staticClass:\"filter\"})]),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_c('scroll',{ref:\"scroll\",staticClass:\"list\",attrs:{\"data\":_vm.songs,\"pull-up-load\":true,\"probeType\":3},on:{\"scroll\":_vm.scroll}},[_c('div',{staticClass:\"song-list-wrapper\"},[_c('song-list',{attrs:{\"rank\":_vm.rank,\"songs\":_vm.songs},on:{\"selectItem\":_vm.selectItem}})],1),_c('loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length),expression:\"!songs.length\"}],staticClass:\"loading-container\"})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"back\" @click=\"back\">\r\n      <i class=\"icon-back\"></i>\r\n    </div>\r\n    <h1 class=\"title\">{{title}}</h1>\r\n    <div class=\"bg-image\" :style=\"baStyle\" ref=\"bgImage\">\r\n      <div class=\"play-wrapper\">\r\n        <div class=\"play\" ref=\"play\" v-show=\"songs.length>0\" @click=\"random\">\r\n          <i class=\"icon-play\"></i>\r\n          <span class=\"text\">随机播放全部</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"filter\"></div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"layer\"></div>\r\n    <scroll :data=\"songs\" \r\n    class=\"list\" :pull-up-load=\"true\" \r\n    ref=\"scroll\" :probeType=\"3\" @scroll=\"scroll\">\r\n      <div class=\"song-list-wrapper\">\r\n        <song-list :rank=\"rank\" @selectItem=\"selectItem\" :songs=\"songs\"></song-list>\r\n      </div>\r\n      <loading class=\"loading-container\" v-show=\"!songs.length\"/>\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Scroll from 'common/scroll/Scroll.vue'\r\nimport SongList from 'content/songlist/SongList.vue'\r\nimport Loading from 'common/loading/Loading.vue'\r\nimport {prefixStyle} from 'common/utils.js'\r\nimport {mapActions} from 'vuex'\r\nimport {playlistMixin} from 'common/mixin.js'\r\nconst RESERVE_HEIGHT = 40\r\nconst transform = prefixStyle('transform') //各种浏览器兼容\r\nexport default {\r\n  props:{\r\n    title:{\r\n      type:String,\r\n      default:''\r\n    },\r\n    bgImage:{\r\n      type:String,\r\n      default:''\r\n    },\r\n    songs:{\r\n      type:Array,\r\n      default(){\r\n        return []\r\n      }\r\n    },\r\n    rank:{\r\n      type:Boolean,\r\n      dafault:false\r\n    }\r\n  },\r\n  mixins: [playlistMixin],\r\n  components: {\r\n    Scroll,\r\n    SongList,\r\n    Loading\r\n},\r\ndata() {\r\nreturn {\r\n  scrollY:-1,\r\n}\r\n},\r\ncomputed: {\r\n  baStyle(){\r\n    return `background-image:url(${this.bgImage})`\r\n  }\r\n},\r\nmounted() {\r\n  this.imageHeight = this.$refs.bgImage.clientHeight //用缓存一下，避免重复操作DOM\r\n  this.minTranslateY = -this.imageHeight + RESERVE_HEIGHT\r\n  this.$refs.scroll.$el.style.top = `${this.imageHeight}px`\r\n},\r\nmethods: {\r\n  scroll(pos){\r\n    this.scrollY = pos.y\r\n  },\r\n  back(){\r\n    this.$router.back()\r\n  },\r\n  selectItem(item,index){\r\n    this.selectPlay({\r\n      list:this.songs,\r\n      index\r\n    })\r\n  },\r\n  random(){\r\n    this.randomPlay({\r\n      list:this.songs\r\n    })\r\n  },\r\n  handlePlaylist(playList){\r\n    const bottom = playList.length > 0 ? '60px' : ''\r\n    this.$refs.scroll.$el.style.bottom = bottom\r\n    this.$refs.scroll.refresh()\r\n  },\r\n  ...mapActions(['selectPlay','randomPlay'])\r\n},\r\nwatch: {\r\n  scrollY(newY){\r\n    let translateY = Math.max(this.minTranslateY,newY)\r\n    let zIndex = 0\r\n    let scale = 1\r\n    const percent = Math.abs(newY/this.imageHeight)//实现无缝贴合\r\n    this.$refs.layer.style[transform]=`translate3d(0,${translateY}px,0)`\r\n    if(newY > 0){\r\n      scale = 1+percent\r\n      zIndex = 10\r\n    }\r\n    if(newY < this.minTranslateY){\r\n      zIndex = 10\r\n      this.$refs.bgImage.style.paddingTop = 0\r\n      this.$refs.bgImage.style.height = `${RESERVE_HEIGHT}px`\r\n      this.$refs.play.style.display = 'none'\r\n    }else{\r\n      this.$refs.bgImage.style.paddingTop = '70%'\r\n      this.$refs.bgImage.style.height = 0\r\n      this.$refs.play.style.display = ''\r\n    }\r\n    this.$refs.bgImage.style.zIndex =zIndex\r\n    this.$refs.bgImage.style[transform]=`scale(${scale})`\r\n  }\r\n},\r\n}\r\n</script>\r\n<style lang='stylus' scoped>\r\n@import \"~assets/stylus/variable\"\r\n@import \"~assets/stylus/mixin\"\r\n  .music-list\r\n    position: fixed\r\n    z-index: 102\r\n    top: 0\r\n    left: 0\r\n    bottom: 0\r\n    right: 0\r\n    background: $color-background\r\n    .back\r\n      position absolute\r\n      top: 0\r\n      left: 6px\r\n      z-index: 50\r\n      .icon-back\r\n        display: block\r\n        padding: 10px\r\n        font-size: $font-size-large-x\r\n        color: $color-theme\r\n    .title\r\n      position: absolute\r\n      top: 0\r\n      left: 10%\r\n      z-index: 40\r\n      width: 80%\r\n      no-wrap()\r\n      text-align: center\r\n      line-height: 40px\r\n      font-size: $font-size-large\r\n      color: $color-text\r\n    .bg-image\r\n      position: relative\r\n      width: 100%\r\n      height: 0\r\n      padding-top: 70%\r\n      transform-origin: top\r\n      background-size: cover\r\n      .play-wrapper\r\n        position: absolute\r\n        bottom: 20px\r\n        z-index: 50\r\n        width: 100%\r\n        .play\r\n          box-sizing: border-box\r\n          width: 135px\r\n          padding: 7px 0\r\n          margin: 0 auto\r\n          text-align: center\r\n          border: 1px solid $color-theme\r\n          color: $color-theme\r\n          border-radius: 100px\r\n          font-size: 0\r\n          .icon-play\r\n            display: inline-block\r\n            vertical-align: middle\r\n            margin-right: 6px\r\n            font-size: $font-size-medium-x\r\n          .text\r\n            display: inline-block\r\n            vertical-align: middle\r\n            font-size: $font-size-small\r\n      .filter\r\n        position: absolute\r\n        top: 0\r\n        left: 0\r\n        width: 100%\r\n        height: 100%\r\n        background: rgba(7, 17, 27, 0.4)\r\n    .bg-layer\r\n      position: relative\r\n      height: 100%\r\n      background: $color-background\r\n    .list\r\n      position fixed\r\n      top 0\r\n      bottom 0\r\n      width: 100%\r\n      background: $color-background\r\n      .song-list-wrapper\r\n        padding: 20px 30px\r\n      .loading-container\r\n        position: absolute\r\n        width: 100%\r\n        top: 50%\r\n        transform: translateY(-50%)\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MusicList.vue?vue&type=template&id=c02bc484&scoped=true&\"\nimport script from \"./MusicList.vue?vue&type=script&lang=js&\"\nexport * from \"./MusicList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MusicList.vue?vue&type=style&index=0&id=c02bc484&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c02bc484\",\n  null\n  \n)\n\nexport default component.exports","import {request} from './request.js'\r\n\r\nexport function getRank(){\r\n  return request({\r\n    url:'/top/category',\r\n    params:{\r\n      showDetail:1\r\n    }\r\n  })\r\n}\r\n\r\nexport function getTopList(id){\r\n  return request({\r\n    url:'/top',\r\n    params:{\r\n      id\r\n    }\r\n  })\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('music-list',{attrs:{\"title\":_vm.title,\"bgImage\":_vm.bgImage,\"songs\":_vm.songs,\"rank\":_vm.rank}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"slide\">\r\n    <music-list :title=\"title\" \r\n    :bgImage=\"bgImage\" :songs=\"songs\" :rank=\"rank\"/> \r\n  </transition>\r\n</template>\r\n<script>\r\nimport MusicList from 'content/musiclist/MusicList.vue'\r\nimport {mapGetters} from 'vuex'\r\nimport {Song} from 'network/singerList.js'\r\nimport {getTopList} from 'network/rank.js'\r\nexport default {\r\nname: 'UniqueList',\r\ncomponents: {\r\n  MusicList\r\n},\r\ndata() {\r\nreturn {\r\n  songs:[],\r\n  bgImage:'',\r\n  rank:true\r\n}\r\n},\r\ncreated() {\r\n  this._getTopList()\r\n},\r\ncomputed: {\r\n  ...mapGetters(['uniqueList']),\r\n  title(){\r\n    return this.uniqueList.label\r\n  },\r\n \r\n\r\n},\r\nmethods: {\r\n  _getTopList(){\r\n    if(!this.uniqueList.topId){\r\n      this.$router.push('/ranking')\r\n    }\r\n    getTopList(this.uniqueList.topId).then((res) => {\r\n      this.songs = this._noramlizeSongs(res.data.list)\r\n      this.bgImage = this.songs[0].image\r\n    })\r\n  },\r\n  _noramlizeSongs(list){\r\n    let ret = []\r\n    list.forEach((item) => {\r\n      ret.push(new Song({\r\n        id:item.id,\r\n        mid:item.mid,\r\n        singer:item.singer,\r\n        name:item.name,\r\n        album:item.albumMid,\r\n        duration:item.interval,\r\n        image:`https://y.gtimg.cn/music/photo_new/T002R300x300M000${item.albumMid}.jpg?max_age=2592000`,\r\n      }))\r\n    })\r\n    return ret\r\n  }\r\n},\r\n}\r\n</script>\r\n<style lang='stylus' scoped>\r\n  .slide-enter-active, .slide-leave-active\r\n    transition: all 0.3s\r\n\r\n  .slide-enter, .slide-leave-to\r\n    transform: translate3d(100%, 0, 0)\r\n\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UniqueList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UniqueList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UniqueList.vue?vue&type=template&id=704a4d38&scoped=true&\"\nimport script from \"./UniqueList.vue?vue&type=script&lang=js&\"\nexport * from \"./UniqueList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UniqueList.vue?vue&type=style&index=0&id=704a4d38&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"704a4d38\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MusicList.vue?vue&type=style&index=0&id=c02bc484&lang=stylus&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UniqueList.vue?vue&type=style&index=0&id=704a4d38&lang=stylus&scoped=true&\""],"sourceRoot":""}